<html lang="ko">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
    <meta name="description" content="글자수 계산기">
    <meta property="og:title" content="글자수 계산기">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://asadal.github.io/wcounter">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:description" content="글자수 계산기">
    <meta property="og:image" content="ogimage.png">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <link rel="stylesheet" type="text/css" href="main.css">
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>글자수 계산기</title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-186055011-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-186055011-1');
    </script>
    </head>
    <body>
        <div class="center">
            <div class="title">글자수 계산기</div>
            <div class="title_underbar_wrapper">
            <div class="title_underbar"></div>
            </div>
            <div> 
                <input class="button" type="button" value="초기화" onclick="empty()">
            </div>
            <textarea oninput="counter(document.getElementById('counter').value)" id="counter" class="counter" cols="40" rows="5"></textarea>
            <div id="result" class="result">공백 제외 0자, 공백 포함 0자, 0바이트, 원고지 0매(행갈이 제외)</div>
            <span style="font-size: 12pt; color:#aaa; font-family: 'Noto Sans KR'; letter-spacing: -1.25px; float: right; text-align: right;">영어, 숫자, 특수문자, 띄어쓰기 1바이트 / 엔터키 2바이트 / 한글 3바이트</span>
        </div>
        <div class="footbar">
        <div class="footbar_content">
            <span style="text-align: left;">👨‍💻 by <a href="https://asadal.github.io">asadal</a></span>
            <span style="float: right;"><a class="github-button" href="https://github.com/asadal/wcounter" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star asadal/wcounter on GitHub">Star</a></span>
        </div>
        </div>
        <script>
        function init() {
            let content = localStorage.getItem("save");
            if(content) {
                counter(content);
                document.getElementById('counter').value = content;
            }
        }

        function counter(content) {
            console.log(content);
            localStorage.setItem("save", content);
            var english = content.replace(/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/gi, "").replace(/[0-9]/gi, "").replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi, "").replace(/\s/gi, "").replace(/\s/gi, "").replace(/(\r\n\t|\n|\r\t)/gm,"");;
            var korean = content.replace(/[a-zA-Z]/gi, "").replace(/[0-9]/gi, "").replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi, "").replace(/\s/gi, "").replace(/(\r\n\t|\n|\r\t)/gm,"");
            var number = content.replace(/[a-zA-Z]/gi, "").replace(/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/gi, "").replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi, "").replace(/\s/gi, "").replace(/(\r\n\t|\n|\r\t)/gm,"");
            var special = content.replace(/[a-zA-Z]/gi, "").replace(/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/gi, "").replace(/[0-9]/gi, "").replace(/\s/gi, "").replace(/(\r\n\t|\n|\r\t)/gm,"");
            var space =  content.replace(/[a-zA-Z]/gi, "").replace(/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/gi, "").replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi, "").replace(/[0-9]/gi, "").replace(/(\r\n\t|\n|\r\t)/gm,"");
            var line = content.replace(/[a-zA-Z]/gi, "").replace(/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/gi, "").replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi, "").replace(/[0-9]/gi, "").replace(/ /gi, "");
            var result = english.length + (korean.length * 3) +  number.length + special.length + space.length + (line.length * 2);
            document.getElementById('result').innerHTML = "공백 제외 " + content.replace(/(\r\n\t|\n|\r\t)/gm,"").replace(/ /gi, "").length + "자, 공백 포함 " + content.length + "자, " + result + "바이트, 원고지 " + (content.length/200).toFixed(1) + "매(행갈이 제외)";
        }   
            
       function empty(){
            document.getElementById('counter').value = null;
            let content = '';
            localStorage.setItem("save", content);
        }

        window.onload = init;
        </script>
    </body>
</html>
